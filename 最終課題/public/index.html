<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ÊâãËªΩ„Å´„Ç¢„Ç§„ÉÜ„É†ÁÆ°ÁêÜ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/petite-vue" defer init></script>
    <script src="client.js" defer></script>
</head>
<body class="bg-gray-100 p-4" v-scope="ItemApp()" @mounted="init()">
    <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-xl font-bold mb-4">üì¶ „Ç¢„Ç§„ÉÜ„É†ÁÆ°ÁêÜ„Ç¢„Éó„É™</h1>

        <div v-if="!isLoggedIn" class="space-y-2">
            <input v-model="user.username" placeholder="„É¶„Éº„Ç∂„ÉºÂêç" class="w-full border p-2 rounded">
            <input v-model="user.password" type="password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" class="w-full border p-2 rounded">
            <button @click="login" class="w-full bg-blue-500 text-white p-2 rounded">„É≠„Ç∞„Ç§„É≥</button>
        </div>

        <div v-else>
            <div class="mb-4 text-sm flex justify-between">
                <span>„É¶„Éº„Ç∂„Éº: {{ user.username }}</span>
                <button @click="isLoggedIn = false" class="text-red-500">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>

            <div class="bg-blue-50 p-3 rounded mb-4">
                <input v-model="form.name" placeholder="„Ç¢„Ç§„ÉÜ„É†Âêç" class="w-full border p-1 mb-2">
                <input v-model.number="form.count" type="number" placeholder="ÂÄãÊï∞" class="w-full border p-1 mb-2">
                <input v-model="form.tagInput" placeholder="#„Çø„Ç∞ #ÂàÜÈ°û" class="w-full border p-1 mb-2">
                <input type="file" @change="uploadImage" class="text-xs mb-2">
                <button @click="saveItem" class="w-full bg-green-500 text-white p-1 rounded">
                    {{ form.id ? 'Êõ¥Êñ∞„Åô„Çã' : 'ÁôªÈå≤„Åô„Çã' }}
                </button>
                <button v-if="form.id" @click="resetForm" class="w-full text-xs text-gray-500 mt-1">„Ç≠„É£„É≥„Çª„É´</button>
            </div>

            <input v-model="searchTag" @input="fetchItems" placeholder="üîç #„Çø„Ç∞„ÅßÊ§úÁ¥¢" class="w-full border-b mb-4 p-1">

            <div class="space-y-2">
                <div v-for="item in items" :key="item.id" class="flex items-center border-b pb-2">
                    <img :src="item.image || 'https://via.placeholder.com/50'" class="w-12 h-12 object-cover rounded mr-3">
                    <div class="flex-1">
                        <div class="font-bold">{{ item.name }}</div>
                        <div class="text-sm text-gray-600">Êï∞Èáè: {{ item.count }}</div>
                        <div class="text-xs text-blue-400">
                            <span v-for="t in item.tags" class="mr-1">#{{ t }}</span>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1">
                        <button @click="editItem(item)" class="text-xs bg-gray-200 px-2 py-1 rounded">Â§âÊõ¥</button>
                        <button @click="deleteItem(item.id)" class="text-xs text-red-500">ÂâäÈô§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>